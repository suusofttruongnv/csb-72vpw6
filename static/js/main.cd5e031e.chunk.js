(this["webpackJsonpreact-eth-metamask-signatures"]=this["webpackJsonpreact-eth-metamask-signatures"]||[]).push([[0],{67:function(e,t){},77:function(e,t,s){"use strict";s.r(t);var r=s(10),a=s(40),n=s.n(a),c=s(17),i=s(15),l=s(14),u=s(3),o=s.n(u),d=s(19),j=s(6);function m(e){var t=e.message;return t?Object(j.jsx)("div",{className:"alert alert-error",children:Object(j.jsxs)("div",{className:"flex-1",children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-6 h-6 mx-2 stroke-current",children:Object(j.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),Object(j.jsx)("label",{children:t})]})}):null}function x(e){var t=e.message;return t?Object(j.jsx)("div",{className:"alert alert-success",children:Object(j.jsx)("div",{className:"flex-1",children:Object(j.jsx)("label",{children:t})})}):null}var b=function(){var e=Object(l.a)(o.a.mark((function e(t){var s,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.message,r=t.address,a=t.signature,e.prev=1,e.next=4,d.a.utils.verifyMessage(s,a);case 4:if(e.sent===r){e.next=7;break}return e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();function h(){var e=Object(r.useState)(),t=Object(i.a)(e,2),s=t[0],a=t[1],n=Object(r.useState)(),c=Object(i.a)(n,2),u=c[0],d=c[1],h=function(){var e=Object(l.a)(o.a.mark((function e(t){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=new FormData(t.target),d(),a(),e.next=6,b({setError:a,message:s.get("message"),address:s.get("address"),signature:s.get("signature")});case 6:e.sent?d("Signature is valid!"):a("Invalid signature");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)("form",{className:"m-4",onSubmit:h,children:Object(j.jsxs)("div",{className:"credit-card w-full shadow-lg mx-auto rounded-xl bg-white",children:[Object(j.jsxs)("main",{className:"mt-4 p-4",children:[Object(j.jsx)("h1",{className:"text-xl font-semibold text-gray-700 text-center",children:"Verify signature"}),Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)("div",{className:"my-3",children:Object(j.jsx)("textarea",{required:!0,type:"text",name:"message",className:"textarea w-full h-24 textarea-bordered focus:ring focus:outline-none",placeholder:"Message"})}),Object(j.jsx)("div",{className:"my-3",children:Object(j.jsx)("textarea",{required:!0,type:"text",name:"signature",className:"textarea w-full h-24 textarea-bordered focus:ring focus:outline-none",placeholder:"Signature"})}),Object(j.jsx)("div",{className:"my-3",children:Object(j.jsx)("input",{required:!0,type:"text",name:"address",className:"textarea w-full input input-bordered focus:ring focus:outline-none",placeholder:"Signer address"})})]})]}),Object(j.jsx)("footer",{className:"p-4",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-primary submit-button focus:ring focus:outline-none w-full",children:"Verify signature"})}),Object(j.jsxs)("div",{className:"p-4 mt-4",children:[Object(j.jsx)(m,{message:s}),Object(j.jsx)(x,{message:u})]})]})})}var f=function(){var e=Object(l.a)(o.a.mark((function e(t){var s,r,a,n,c,i,l,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.setError,r=t.message,e.prev=1,console.log({message:r}),window.ethereum){e.next=5;break}throw new Error("No crypto wallet found. Please install it.");case 5:return e.next=7,window.ethereum.send("eth_requestAccounts");case 7:return a=new d.a.providers.Web3Provider(window.ethereum),n=a.getSigner(),e.next=11,n.signMessage(r);case 11:return c=e.sent,e.next=14,n.getAddress();case 14:return i=e.sent,l=i,u=r,window.ethereum.request({method:"personal_sign",params:[l,u]}).then((function(e){console.log("res",e)})),e.abrupt("return",{message:r,signature:c,address:i});case 21:e.prev=21,e.t0=e.catch(1),s(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}();function g(){var e=Object(r.useRef)(),t=Object(r.useState)([]),s=Object(i.a)(t,2),a=s[0],n=s[1],u=Object(r.useState)(),d=Object(i.a)(u,2),x=d[0],b=d[1],h=function(){var e=Object(l.a)(o.a.mark((function e(t){var s,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=new FormData(t.target),b(),e.next=5,f({setError:b,message:s.get("message")});case 5:(r=e.sent)&&n([].concat(Object(c.a)(a),[r]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)("form",{className:"m-4",onSubmit:h,children:Object(j.jsxs)("div",{className:"credit-card w-full shadow-lg mx-auto rounded-xl bg-white",children:[Object(j.jsxs)("main",{className:"mt-4 p-4",children:[Object(j.jsx)("h1",{className:"text-xl font-semibold text-gray-700 text-center",children:"Sign messages"}),Object(j.jsx)("div",{className:"",children:Object(j.jsx)("div",{className:"my-3",children:Object(j.jsx)("textarea",{required:!0,type:"text",name:"message",className:"textarea w-full h-24 textarea-bordered focus:ring focus:outline-none",placeholder:"Message"})})})]}),Object(j.jsxs)("footer",{className:"p-4",children:[Object(j.jsx)("button",{type:"submit",className:"btn btn-primary submit-button focus:ring focus:outline-none w-full",children:"Sign message"}),Object(j.jsx)(m,{message:x})]}),a.map((function(t,s){return Object(j.jsx)("div",{className:"p-2",children:Object(j.jsxs)("div",{className:"my-3",children:[Object(j.jsxs)("p",{children:["Message ",s+1,": ",t.message]}),Object(j.jsxs)("p",{children:["Signer: ",t.address]}),Object(j.jsx)("textarea",{type:"text",readOnly:!0,ref:e,className:"textarea w-full h-24 textarea-bordered focus:ring focus:outline-none",placeholder:"Generated signature",value:t.signature})]})},t)}))]})})}function p(){return Object(j.jsxs)("div",{className:"flex flex-wrap",children:[Object(j.jsx)("div",{className:"w-full lg:w-1/2",children:Object(j.jsx)(g,{})}),Object(j.jsx)("div",{className:"w-full lg:w-1/2",children:Object(j.jsx)(h,{})})]})}var O=document.getElementById("root");n.a.render(Object(j.jsx)(r.StrictMode,{children:Object(j.jsx)(p,{})}),O)}},[[77,1,2]]]);
//# sourceMappingURL=main.cd5e031e.chunk.js.map